{% set website = load_data(path="data/website.yml") %}
{% set education = load_data(path="data/education.yml") %}
{% set work = load_data(path="data/work.yml") %}
{% set writing = load_data(path="data/writing.yml") %}

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ website.name }}</title>
    <meta name="description" content="Academic resume â€” {{ website.name }}" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --bg: #fbfbf7;
        --text: #111827;
        --muted: #5f6876;
        --muted-2: #8a94a6;
        --rule: #e5e7eb;

        --accent-edu: #2f5fb3;    /* strong blue */
        --accent-work: #2f7d4a;   /* strong green */
        --accent-write: #7b3fa1;  /* strong purple */

        --max: 980px;
        --pad: 56px;

        --sans: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial,
          sans-serif;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: var(--sans);
        color: var(--text);
        background: var(--bg);
        line-height: 1.6;
        font-size: 17.5px;
      }

      .wrap {
        max-width: var(--max);
        margin: 0 auto;
        padding: clamp(28px, 4vw, var(--pad));
      }

      /* Top */
      .top {
        display: flex;
        gap: 18px;
        align-items: center;
        margin-bottom: 18px;
      }

      .avatar {
        width: 82px;
        height: 82px;
        border-radius: 999px;
        object-fit: cover;
        flex: 0 0 auto;
      }

      .name {
        font-size: clamp(30px, 3.2vw, 40px);
        font-weight: 500;
        letter-spacing: -0.02em;
        margin: 0;
        line-height: 1.05;
      }

      .tagline {
        margin: 8px 0 0;
        color: var(--muted);
        font-size: 16px;
        font-weight: 400;
      }

      .intro {
        margin: 14px 0 38px;
        max-width: 72ch;
        color: var(--muted);
        font-size: 17px;
      }

      /* Sections */
      .section {
        margin: 28px 0;
      }

      .section-title {
        font-size: 12px;
        font-weight: 700;
        letter-spacing: 0.14em;
        text-transform: uppercase;
        margin: 0 0 14px;
        border: none !important;
        text-decoration: none !important;
      }

      .section-edu > .section-title {
        color: var(--accent-edu) !important;
      }
      .section-work > .section-title {
        color: var(--accent-work) !important;
      }
      .section-writing > .section-title {
        color: var(--accent-write) !important;
      }

      .list {
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .row {
        display: grid;
        grid-template-columns: 150px 1fr;
        gap: 26px;
        align-items: start;
      }

      .when {
        color: var(--muted-2);
        font-size: 13.5px;
        padding-top: 3px;
        white-space: nowrap;
        font-weight: 500;
        font-variant-numeric: tabular-nums;
      }

      .item-title {
        margin: 0;
        font-size: 16.5px;
        font-weight: 600;
        letter-spacing: -0.01em;
        line-height: 1.25;
      }

      .item-sub {
        margin: 6px 0 0;
        color: var(--muted);
        font-size: 15.5px;
        line-height: 1.45;
      }

      .details {
        margin: 10px 0 0;
        padding-left: 18px;
        color: var(--muted);
        font-size: 15.5px;
      }

      .details li {
        margin: 6px 0;
      }

      .badge {
        display: inline-flex;
        align-items: center;
        padding: 2px 9px;
        border-radius: 999px;
        border: 1px solid var(--rule);
        color: var(--muted);
        font-size: 12px;
        font-weight: 600;
        margin-left: 10px;
        vertical-align: middle;
      }

      .rule {
        height: 1px;
        background: var(--rule);
        margin: 30px 0;
      }

      /* Footer */
      .footer {
        margin-top: 34px;
        color: var(--muted-2);
        font-size: 14px;
        display: flex;
        flex-wrap: wrap;
        gap: 10px 18px;
        align-items: center;
      }

      .footer a {
        color: var(--muted);
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        font-weight: 500;
      }

      .footer a:hover {
        color: var(--text);
        text-decoration: underline;
        text-underline-offset: 3px;
      }

      .icon {
        width: 18px;
        height: 18px;
        display: inline-block;
      }

      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }

      .project-link {
        color: inherit;
        text-decoration: none;
      }

      .project-link:hover,
      .project-link:focus {
        color: #2563eb; /* blue on hover/focus */
        text-decoration: underline;
        text-underline-offset: 3px;
      }

      .project-desc {
        margin: 8px 0 0;
        color: var(--muted);
        font-size: 15.5px;
        line-height: 1.45;
      }

      @media (max-width: 640px) {
        .top {
          align-items: flex-start;
        }

        .avatar {
          width: 64px;
          height: 64px;
        }

        .row {
          grid-template-columns: 1fr;
          gap: 8px;
        }

        .when {
          white-space: normal;
        }
      }
    </style>
  </head>

  <body>
    <main class="wrap">
      <header class="top">
        <img class="avatar" src="/picture.jpeg" alt="{{ website.name }}" />
        <div>
          <h1 class="name">{{ website.name }}</h1>
          <p class="tagline">{{ website.tagline }}</p>
        </div>
      </header>

      <p class="intro">{{ website.intro }}</p>

      <section class="section section-edu" id="education">
        <h2 class="section-title">Education</h2>
        <div class="list">
          {% for e in education.items %}
            <div class="row">
              <div class="when">{{ e.years }}</div>
              <div>
                <p class="item-title">
                  {{ e.degree }}
                  {% if e.badge %}
                    <span class="badge">{{ e.badge }}</span>
                  {% endif %}
                </p>
                <p class="item-sub">{{ e.institution }}</p>
              </div>
            </div>
          {% endfor %}
        </div>
      </section>

      <div class="rule" role="separator" aria-hidden="true"></div>

      <section class="section section-work" id="work">
        <h2 class="section-title">Work Experience</h2>
        <div class="list">
          {% for w in work.items %}
            <div class="row">
              <div class="when">{{ w.years }}</div>
              <div>
                <p class="item-title">{{ w.title }}</p>
                <p class="item-sub">{{ w.org }}</p>

                {% if w.details %}
                  <ul class="details">
                    {% for d in w.details %}
                      <li>{{ d }}</li>
                    {% endfor %}
                  </ul>
                {% endif %}
              </div>
            </div>
          {% endfor %}
        </div>
      </section>

      <div class="rule" role="separator" aria-hidden="true"></div>

      <section class="section section-writing" id="writing">
        <h2 class="section-title">Writing &amp; Projects</h2>

        <div class="list">
          {% for p in writing.items %}
            <div class="row">
              <div class="when">{{ p.year }}</div>

              <div>
                <p class="item-title">
                  <a class="project-link" href="{{ p.link }}" target="_blank" rel="noopener">
                    {{ p.title }}
                  </a>
                </p>

                {% if p.venue %}
                  <p class="item-sub">{{ p.venue }}</p>
                {% endif %}

                {% if p.description %}
                  <p class="project-desc">{{ p.description }}</p>
                {% endif %}
              </div>
            </div>
          {% endfor %}
        </div>
      </section>

      <footer class="footer">
        {% for l in website.links %}
          {% if l.kind == "email" %}
            <a href="{{ l.href }}">{{ l.label }}</a>
          {% elif l.kind == "github" %}
            <a href="{{ l.href }}" rel="noopener noreferrer" target="_blank" aria-label="GitHub">
              <svg class="icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path
                  d="M12 .5C5.73.5.75 5.64.75 12c0 5.1 3.29 9.43 7.86 10.96.57.11.78-.25.78-.56v-2c-3.2.71-3.88-1.4-3.88-1.4-.53-1.38-1.3-1.75-1.3-1.75-1.06-.74.08-.73.08-.73 1.17.08 1.79 1.23 1.79 1.23 1.04 1.83 2.73 1.3 3.4.99.11-.77.41-1.3.74-1.6-2.55-.3-5.23-1.31-5.23-5.83 0-1.29.45-2.35 1.19-3.18-.12-.3-.52-1.52.11-3.17 0 0 .97-.32 3.18 1.21a10.7 10.7 0 0 1 2.9-.4c.98 0 1.97.14 2.9.4 2.2-1.53 3.17-1.21 3.17-1.21.64 1.65.24 2.87.12 3.17.74.83 1.18 1.9 1.18 3.18 0 4.53-2.69 5.53-5.25 5.82.42.37.8 1.1.8 2.22v3.29c0 .31.2.67.79.56A11.3 11.3 0 0 0 23.25 12C23.25 5.64 18.27.5 12 .5z"
                />
              </svg>
              <span class="sr-only">GitHub</span>
              <span>{{ l.label }}</span>
            </a>
          {% elif l.kind == "linkedin" %}
            <a href="{{ l.href }}" rel="noopener noreferrer" target="_blank" aria-label="LinkedIn">
              <svg class="icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path
                  d="M20.45 20.45h-3.56v-5.57c0-1.33-.03-3.04-1.85-3.04-1.85 0-2.13 1.45-2.13 2.95v5.66H9.35V9h3.42v1.56h.05c.48-.9 1.65-1.85 3.39-1.85 3.62 0 4.29 2.38 4.29 5.47v6.27zM5.34 7.43a2.07 2.07 0 1 1 0-4.14 2.07 2.07 0 0 1 0 4.14zM7.12 20.45H3.56V9h3.56v11.45zM22.23 0H1.77C.79 0 0 .77 0 1.72v20.56C0 23.23.79 24 1.77 24h20.46c.98 0 1.77-.77 1.77-1.72V1.72C24 .77 23.21 0 22.23 0z"
                />
              </svg>
              <span class="sr-only">LinkedIn</span>
              <span>{{ l.label }}</span>
            </a>
          {% endif %}
        {% endfor %}
      </footer>
    </main>
  </body>
</html>
